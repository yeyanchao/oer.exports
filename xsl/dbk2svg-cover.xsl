<?xml version="1.0" ?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:mml="http://www.w3.org/1998/Math/MathML"
  xmlns:db="http://docbook.org/ns/docbook"
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  version="1.0">

<xsl:import href="debug.xsl"/>


<xsl:template match="db:book">
	<xsl:variable name="title" select="db:bookinfo/db:title"/>
	
	<!-- The big titlepage SVG -->
<xsl:choose>
  <xsl:when test="$cnx.site-type = 'Connexions'">

<!-- Connexions branded cover -->
<svg id="Layer_1" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 596.275 842.986" xml:space="preserve" height="842.99px" viewBox="0 0 596.275 842.986" width="596.28px" version="1.1" y="0px" x="0px" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><metadata id="metadata86"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata>
<linearGradient id="SVGID_1_" y2="11.251" gradientUnits="userSpaceOnUse" x2="297.62" y1="829.99" x1="297.62">
    <stop id="stop4" stop-color="#4678AA" offset="0"/>
    <stop id="stop6" stop-color="#4F80B3" offset="0.2145"/>
    <stop id="stop8" stop-color="#70A1D5" offset="1"/>
</linearGradient>
<rect id="rect10" height="818.74" width="594.24" y="11.25" x="0.5" fill="url(#SVGID_1_)"/>
<linearGradient id="SVGID_2_" y2="1.2507" gradientUnits="userSpaceOnUse" x2="298.14" y1="841.74" x1="298.14">
    <stop id="stop13" stop-color="#4879AB" offset="0.011"/>
    <stop id="stop15" stop-color="#4F80B3" offset="0.2145"/>
    <stop id="stop17" stop-color="#70A1D5" offset="1"/>
</linearGradient>
<rect id="rect19" height="840.49" width="595.28" stroke="#EB7923" y="1.25" x="0.5" fill="url(#SVGID_2_)"/>
<linearGradient id="SVGID_3_" y2="98.872" gradientUnits="userSpaceOnUse" x2="296.37" y1="732.4" x1="296.37">
    <stop id="stop22" stop-color="#6695BF" offset="0"/>
    <stop id="stop24" stop-color="#8DB5E0" offset="1"/>
</linearGradient>
<path id="path26" opacity="0.62" d="M529.27,106.84c-100.78,64.47-175.94,212.66-202.52,268.25-2.736-0.75-5.381-1.678-8.334-1.678-4.621,0-8.955,1.046-12.932,2.784-28.841-45.915-122.48-174.21-123.48-178.46,5.501-24.256-14.337-46.319-36.39-38.593-19.742,6.905-23.148,41.915,13.385,50.072,35.031,7.834,115.96,137.64,134.48,176.89-4.288,5.45-7.239,12.026-7.239,19.479,0,12.74,7.596,23.552,18.361,28.757-38.819,131.76-179.35,228.44-193.6,230.68-11.597-15.457-32.913-18.109-49.035-9.371-28.316,15.396-28.839,53.453-10.908,67.564,32.531,25.674,63.945-8.119,79.948-32.818,119.6-79.602,165.59-201.92,184.09-253.32,1.121,0.105,2.121,0.665,3.313,0.665,2.881,0,5.455-0.93,8.098-1.632,28.055,43.5,90.166,126.53,91.021,130.08,2.549,10.881,5.168,37.947,31.77,32.791,14.885-2.881,19.242-21.207,12.408-29.397-6.383-7.621-21.529-9.396-21.529-9.396s-40.438-25.838-103.45-128.88c8.17-5.857,13.859-14.943,13.859-25.73,0-11.418-6.287-20.958-15.24-26.661,40.725-112.75,153.4-244.74,199.28-255.74,38.21-1.92,10.18-40.577-5.35-16.33" fill="url(#SVGID_3_)"/>
<rect id="rect28" height="36.781" width="595.28" y="1.25" x="0.5" fill="#FEDC35"/>
<g id="g30">
    <g id="g32">
        <g id="g34" fill="#FFF">
            <path id="path36" d="M500.02,737.04c-0.558,1.049-1.552,1.629-2.769,1.629-1.8,0-3.116-1.318-3.116-3.148,0-1.832,1.316-3.16,3.116-3.16,1.116,0,2.066,0.515,2.636,1.406l-0.627,0.445c-0.379-0.724-1.139-1.148-2.009-1.148-1.339,0-2.346,1.027-2.346,2.457,0,1.428,1.007,2.445,2.346,2.445,0.937,0,1.686-0.469,2.165-1.375l0.6,0.44z"/>
            <path id="path38" d="M504.82,732.5h0.393l3.906,4.498v-4.498h0.75v6.019h-0.381l-3.918-4.5v4.5h-0.75v-6.022z"/>
            <path id="path40" d="M516.84,735.49l-2.42-2.992h0.914l1.977,2.41,1.967-2.41h0.901l-2.423,2.957,2.492,3.062h-0.96l-2.002-2.479-2.021,2.479h-0.883l2.45-3.03z"/>
            <path id="path42" d="M526.13,738.18c0,0.301-0.2,0.49-0.448,0.49-0.244,0-0.457-0.189-0.457-0.49s0.213-0.504,0.457-0.504c0.25,0,0.45,0.2,0.45,0.5z"/>
            <path id="path44" d="M531.42,735.52c0-1.832,1.32-3.16,3.116-3.16,1.8,0,3.129,1.328,3.129,3.16,0,1.83-1.329,3.148-3.129,3.148s-3.12-1.32-3.12-3.15zm5.46,0c0-1.43-0.994-2.457-2.346-2.457-1.339,0-2.345,1.027-2.345,2.457,0,1.428,1.006,2.445,2.345,2.445,1.37,0.01,2.36-1.02,2.36-2.44z"/>
            <path id="path46" d="M542.41,732.5h3.451c1.183,0,1.887,0.625,1.887,1.675,0,0.848-0.548,1.543-1.429,1.696l1.508,2.646h-0.825l-1.508-2.635h-2.336v2.635h-0.748v-6.042zm3.41,2.68c0.763,0,1.15-0.347,1.15-0.982,0-0.623-0.389-1.004-1.116-1.004h-2.69v1.986h2.656z"/>
            <path id="path48" d="M557.19,736h-1.644v-0.693h2.389v1.809c-0.582,1.007-1.539,1.554-2.724,1.554-1.8,0-3.116-1.318-3.116-3.148,0-1.832,1.316-3.16,3.116-3.16,1.116,0,2.066,0.515,2.636,1.406l-0.624,0.445c-0.382-0.724-1.141-1.148-2.012-1.148-1.339,0-2.346,1.027-2.346,2.457,0,1.428,1.007,2.445,2.346,2.445,0.836,0,1.497-0.357,1.978-1.084l-0.02-0.9z"/>
        </g>
    </g>
    <path id="path50" d="M480.13,687.88c-10.358,6.627-18.084,21.858-20.815,27.571-0.281-0.075-0.554-0.17-0.856-0.17-0.475,0-0.921,0.107-1.329,0.285-2.965-4.719-12.591-17.906-12.691-18.344,0.563-2.494-1.476-4.762-3.74-3.967-2.03,0.711-2.381,4.309,1.375,5.146,3.601,0.806,11.919,14.148,13.823,18.183-0.441,0.561-0.744,1.235-0.744,2.004,0,1.309,0.779,2.42,1.887,2.955-3.99,13.543-18.435,23.479-19.898,23.713-1.191-1.59-3.383-1.863-5.041-0.965-2.908,1.582-2.964,5.493-1.12,6.944,3.344,2.64,6.572-0.834,8.218-3.373,12.294-8.182,17.021-20.756,18.923-26.039,0.114,0.013,0.218,0.068,0.341,0.068,0.296,0,0.562-0.096,0.832-0.168,2.884,4.473,9.269,13.006,9.356,13.371,0.262,1.119,0.529,3.899,3.265,3.371,1.529-0.297,1.978-2.181,1.276-3.023-0.656-0.783-2.214-0.965-2.214-0.965s-4.157-2.654-10.635-13.246c0.84-0.604,1.425-1.537,1.425-2.645,0-1.177-0.646-2.154-1.565-2.742,4.187-11.588,15.768-25.156,20.483-26.285,3.91-0.18,1.03-4.15-0.57-1.66" fill="#FDBA34"/>
    <g id="g52" fill="#FFF">
        <path id="path54" d="M329.32,721.26c-0.955,1.793-2.651,2.782-4.729,2.782-3.07,0-5.322-2.247-5.322-5.377,0-3.125,2.253-5.396,5.322-5.396,1.906,0,3.527,0.877,4.498,2.402l-1.064,0.764c-0.649-1.238-1.944-1.965-3.434-1.965-2.289,0-4.005,1.754-4.005,4.194,0,2.441,1.716,4.179,4.005,4.179,1.602,0,2.879-0.802,3.698-2.347l1.02,0.78z"/>
        <path id="path56" d="M346.04,718.66c0-3.125,2.249-5.396,5.319-5.396,3.068,0,5.341,2.271,5.341,5.396,0,3.13-2.271,5.377-5.341,5.377s-5.32-2.25-5.32-5.38zm9.33,0c0-2.44-1.697-4.194-4.005-4.194-2.289,0-4.005,1.754-4.005,4.194,0,2.441,1.716,4.179,4.005,4.179,2.31,0,4.01-1.76,4.01-4.18z"/>
        <path id="path58" d="M374.21,713.49h0.666l6.677,7.687v-7.687h1.277v10.279h-0.648l-6.692-7.686v7.686h-1.278l-0.01-10.28z"/>
        <path id="path60" d="M401.15,713.49h0.669l6.674,7.687v-7.687h1.277v10.279h-0.646l-6.695-7.686v7.686h-1.277l0.01-10.28z"/>
        <path id="path62" d="M428.1,713.49h8.089v1.183h-6.811v3.014h4.12v1.185h-4.12v3.717h7.229v1.184h-8.507v-10.266z"/>
        <path id="path64" d="M475.39,713.44h1.298v10.373h-1.298v-10.372z"/>
        <path id="path66" d="M494.22,718.66c0-3.125,2.249-5.396,5.318-5.396s5.34,2.271,5.34,5.396c0,3.13-2.271,5.377-5.34,5.377s-5.32-2.25-5.32-5.38zm9.32,0c0-2.44-1.696-4.194-4.006-4.194-2.288,0-4.005,1.754-4.005,4.194,0,2.441,1.717,4.179,4.005,4.179,2.32,0,4.02-1.76,4.02-4.18z"/>
        <path id="path68" d="M522.38,713.49h0.669l6.675,7.687v-7.687h1.28v10.279h-0.649l-6.691-7.686v7.686h-1.28v-10.28z"/>
        <path id="path70" d="M549.1,721.12c1.469,1.144,3.088,1.734,4.598,1.734,1.963,0,3.202-0.934,3.202-2.154,0-0.936-0.8-1.696-2.402-1.83-1.755-0.133-3.146-0.153-4.234-0.649-0.953-0.457-1.467-1.199-1.467-2.115,0-1.584,1.542-2.842,3.985-2.842,1.734,0,3.433,0.59,4.92,1.68l-0.743,1.066c-1.279-1.029-2.691-1.545-4.156-1.545-1.621,0-2.672,0.727-2.672,1.582,0,0.383,0.172,0.668,0.497,0.916,0.876,0.668,2.345,0.516,4.231,0.725,2.154,0.248,3.396,1.488,3.396,3.051,0,1.773-1.643,3.3-4.539,3.3-2.021,0-3.757-0.57-5.357-1.812l0.74-1.1z"/>
    </g>
</g>
<rect id="rect72" height="49.854" width="595.28" y="791.88" x="0.5" fill="#FEDC35"/>
<line id="line74" y2="1.25" x1="0.5" x2="595.78" stroke="#EB7923" y1="1.25" stroke-width="2" fill="none"/>
<line id="line76" y2="38.031" x1="0.5" x2="595.78" stroke="#EB7923" y1="38.031" stroke-width="2" fill="none"/>
<line id="line78" y2="791.88" x1="0.5" x2="595.78" stroke="#EB7923" y1="791.88" stroke-width="2" fill="none"/>
<line id="line80" y2="841.74" x1="0.5" x2="595.78" stroke="#EB7923" y1="841.74" stroke-width="2" fill="none"/>
<flowRoot id="flowRoot2894" style="writing-mode:lr;text-anchor:start;text-align:start;" line-height="130%" font-weight="bold" xml:space="preserve" font-size="51px" transform="translate(-4.090618e-6,0)" font-stretch="normal" font-variant="normal" font-style="normal" font-family="Bitstream Vera Sans" fill="#ffffff"><flowRegion id="flowRegion2896"><rect id="rect2898" style="text-align:start;" height="610" width="505" y="75" x="45" fill="#FFF"/></flowRegion><flowPara id="flowPara2900"><xsl:value-of select="$title"/></flowPara></flowRoot></svg>

  </xsl:when>
  <xsl:otherwise>

    <!-- Generic Rhaptos cover -->
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="595.275px" height="840.486px" viewBox="0 0 595.275 840.486" enable-background="new 0 0 595.275 840.486" xml:space="preserve">
      <rect fill="#FFFFFF" width="595.275" height="840.486"/>
      <flowRoot id="flowRoot2894" style="writing-mode:lr;text-anchor:start;text-align:start;" line-height="130%" font-weight="normal" xml:space="preserve" font-size="52px" transform="translate(-4.090618e-6,0)" font-stretch="normal" font-variant="normal" font-style="normal" font-family="Bitstream Vera Sans" fill="#436976">
        <flowRegion id="flowRegion2896">
          <rect id="rect2898" style="text-align:start;" height="750" width="465" y="0" x="65" fill="#436976"/>
        </flowRegion>
        <flowPara id="flowPara2900">
          <xsl:value-of select="$title"/>
        </flowPara>
      </flowRoot>
    </svg>

  </xsl:otherwise>
</xsl:choose>

</xsl:template>
</xsl:stylesheet>
